<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">



  <changeSet author="madina" id="create-sequence">
    <sql endDelimiter=";;"><![CDATA[
      create sequence pro_seq start with 1000;;
    ]]></sql>
  </changeSet>

  <changeSet author="madina" id="create-table-child">
    <sql endDelimiter=";;"><![CDATA[
      create table child (
        id serial not null,
        card_id integer references card(id),
        surname varchar(50) not null,
        name varchar(50) not null,
        patronymic varchar(50),
        gender varchar(6) not null,
        birth_date date not null,
        actual integer,
        primary key(id)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="madina" id="create-table-event">
    <sql endDelimiter=";;"><![CDATA[
      create table event (
        id serial not null,
        action varchar(3) not null,
        date timestamp not null,
        entrance varchar(20) not null,
        card integer references card(inDec),
        actual integer,
        primary key(id)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="madina" id="create-table-parent">
    <sql endDelimiter=";;"><![CDATA[
      create table parent (
        id serial not null,
        username varchar(100) not null,
        surname varchar(50) not null,
        name varchar(50) not null,
        patronymic varchar(50),
        email varchar(100) not null,
        gender varchar(6) not null,
        birth_date date,
        encoded_password varchar(255),
        actual integer,
        primary key(id)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="madina" id="create-table-parent_phone">
    <sql endDelimiter=";;"><![CDATA[
      create table parent_phone (
        parent integer references parent(id),
        number varchar(20) not null,
        type varchar(10) not null,
        actual integer,
        primary key(parent, number)
      )
    ]]></sql>
  </changeSet>

  <changeSet author="madina" id="create-table-parent_child">
    <sql endDelimiter=";;"><![CDATA[
      create table parent_child (
        id serial not null,
        parent integer references parent(id),
        child integer references child(id),
        notification integer,
        actual integer,
        primary key(id)
      )
    ]]></sql>
  </changeSet>


  <changeSet author="madina" id="create-table-parent_child">
    <sql endDelimiter=";;"><![CDATA[
      create table card (
        id serial not null,
        card_number varchar(20),
        inHex varchar(20),
        inDec varchar(20),
        actual integer,
        primary key(id)
      )
    ]]></sql>
  </changeSet>

  <!--<changeSet author="madina" id="insert-child">-->
    <!--<sql endDelimiter=";;"><![CDATA[-->
    <!--insert into child(id, surname, name, patronymic, gender, birth_date, actual)-->
      <!--values (1, 'Asyl', 'Aisha', 'Asla', 'female', '2001-09-28', true),-->
             <!--(2, 'Kasymzhan', 'Arman', 'Adam', 'male', '2001-09-28', true),-->
             <!--(3, 'Ermekova', 'Altyn', 'Iman kyzy', 'female', '2001-09-28', true),-->
             <!--(4, 'Asanov', 'Syrym', 'Asanovich', 'male', '2001-09-28', true);-->
  <!--]]></sql>-->
  <!--</changeSet>-->

  <!--<changeSet author="madina" id="insert-parent">-->
    <!--<sql endDelimiter=";;"><![CDATA[-->
    <!--insert into parent(id, surname, name, patronymic, gender, actual)-->
      <!--values (1, 'Asyl', 'Aisha', '', 'female', true),-->
             <!--(2, 'Kasymzhan', 'Arman', 'Adam', 'male', true),-->
             <!--(3, 'Ermekova', 'Altyn', 'Iman kyzy', 'female', true),-->
             <!--(4, 'Asanov', 'Syrym', 'Asanovich', 'male', true);-->
  <!--]]></sql>-->
  <!--</changeSet>-->

  <!--<changeSet author="madina" id="insert-event">-->
    <!--<sql endDelimiter=";;"><![CDATA[-->
    <!--insert into event(id, action, date, actual, child)-->
      <!--values (1, 'in', '2007-02-16 07:38:40', true, 1),-->
             <!--(2, 'out', '2007-02-16 11:22:13', true, 1),-->
             <!--(3, 'in', '2007-02-16 11:32:55', true, 1),-->
             <!--(4, 'out', '2007-02-16 14:25:43', true, 1),-->
             <!--(5, 'in', '2007-02-17 07:38:40', true, 1),-->
             <!--(6, 'out', '2007-02-17 11:22:13', true, 1),-->
             <!--(7, 'in', '2007-02-17 11:32:55', true, 1),-->
             <!--(8, 'out', '2007-02-17 14:25:43', true, 1),-->
             <!--(9, 'in', '2007-02-16 07:38:40', true, 2),-->
             <!--(10, 'out', '2007-02-16 11:22:13', true, 2),-->
             <!--(11, 'in', '2007-02-16 11:32:55', true, 2),-->
             <!--(12, 'out', '2007-02-16 14:25:43', true, 2),-->
             <!--(13, 'in', '2007-02-16 07:38:40', true, 3),-->
             <!--(14, 'out', '2007-02-16 11:22:13', true, 3),-->
             <!--(15, 'in', '2007-02-16 11:32:55', true, 3),-->
             <!--(16, 'out', '2007-02-16 14:25:43', true, 3),-->
             <!--(17, 'in', '2007-02-17 07:38:40', true, 3),-->
             <!--(18, 'out', '2007-02-17 11:22:13', true, 3),-->
             <!--(19, 'in', '2007-02-17 11:32:55', true, 3),-->
             <!--(20, 'out', '2007-02-17 14:25:43', true, 3);-->
  <!--]]></sql>-->
  <!--</changeSet>-->

  <!--<changeSet author="madina" id="insert-parent_phone">-->
    <!--<sql endDelimiter=";;"><![CDATA[-->
    <!--insert into parent_phone(parent, number, type, actual)-->
      <!--values (1, '+77474938358', 'mob', true),-->
             <!--(2, '+77774356773', 'home', true),-->
             <!--(3, '+77472342441', 'mob', true),-->
             <!--(1, '+77756999767', 'work', true);-->
  <!--]]></sql>-->
  <!--</changeSet>-->

  <!--<changeSet author="madina" id="insert-parent_child">-->
    <!--<sql endDelimiter=";;"><![CDATA[-->
    <!--insert into parent_child(id, parent, child, actual)-->
      <!--values (1, 1, 1, true),-->
             <!--(2, 2, 1, true),-->
             <!--(3, 3, 2, true),-->
             <!--(4, 4, 2, true),-->
             <!--(5, 1, 3, true),-->
             <!--(6, 2, 4, true),-->
             <!--(7, 3, 4, true),-->
             <!--(8, 4, 3, true);-->
  <!--]]></sql>-->
  <!--</changeSet>-->

</databaseChangeLog>